# 睡眠节律：时间推进

一个基于两过程模型（Process S 睡眠压力 + Process C 昼夜节律）的浏览器小游戏。你将通过“睡觉/小睡/咖啡/强光/屏幕/运动”等行动，在 7 天内维持较高的健康与表现。

## 运行

直接用浏览器打开 `index.html` 即可。文件位于工作区：`/workspace/index.html`。

## 玩法

- 顶部控制：开始/暂停、跳到次日、加速倍率。
- 中部“2D 世界（房间）”：
  - 移动：WASD 或 方向键。
  - 交互：靠近目标后按 E。
  - 开始/暂停：空格键。
  - 可交互区域：床（睡觉/起床）、咖啡机（喝咖啡）、窗户（强光曝露）、电视/屏幕（切换屏幕）、运动区（运动30分钟）、沙发（小睡20分钟）。
- 左侧“指标”展示：
  - 清醒度：由 Process S 与 Process C 决定，并受咖啡因影响。
  - 睡眠压力（S）：清醒时累积、睡眠时指数下降。
  - 昼夜节律（C）：24h 正弦节律，白天促进清醒、夜晚促进困倦。
  - 褪黑素：夜间升高，受强光与屏幕抑制；遮光可略增。
  - 咖啡因：半衰期约 5h；晚喝影响夜间入睡与睡眠质量。
  - 健康：长期睡眠不足下降；优质睡眠与运动帮助恢复。
  - 表现：工作时（09:00-17:00）依赖清醒度。
- 中部曲线：最近 24 小时清醒度、睡眠压力与昼夜节律的走势。
- 右侧行动（与2D交互等效）：
  - 上床睡觉：切换睡眠/清醒。
  - 小睡 20 分钟：短暂入睡缓解压力。
  - 咖啡：提升清醒度（有半衰期）。
  - 强光曝露 15 分钟：抑制褪黑素并微调相位（早晨前移，夜晚后移）。
  - 屏幕（蓝光）：夜间抑制褪黑素，可能推迟入睡。
  - 运动 30 分钟：略降当前睡眠压力，提升夜间恢复与健康。

## 模型简述（简化）

- S（睡眠压力）
  - 清醒时线性累积，约 16h 走满；睡眠时以半衰期 3h 指数下降。
- C（昼夜节律）
  - 24h 正弦节律（振幅 0.6），相位可被强光微调（早前夜后）。
- 褪黑素
  - 夜间随 C 降低而上升；受强光/屏幕抑制；夜间遮光略增。
- 清醒度 ≈ clamp(1 - S + C + 咖啡因加成)
- 健康
  - 白天若 S 极高代表睡眠债，缓慢扣减；睡眠中逐步恢复，运动加成。
- 表现
  - 工作时依赖清醒度，带少量噪声。

## 目标

- 坚持 7 天。
- 结束时健康 ≥ 70；平均工作表现 ≥ 70。

## 可能的改进

- 更精细的睡眠结构（NREM/REM 周期）与睡眠质量评分。
- 个体差异（早型/晚型）、社交时差与轮班。
- 任务系统与事件（出差、聚会、突发任务）。
- 更真实的光谱与强度建模，褪黑素动力学。
- 存档、排行榜与移动端UI适配优化。