<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>睡眠节律：时间推进</title>
  <link rel="stylesheet" href="/workspace/style.css" />
</head>
<body>
  <div id="app">
    <header class="topbar">
      <div class="title">睡眠节律：时间推进</div>
      <div class="meta">
        <div id="day">第 1 天</div>
        <div id="clock">07:00</div>
        <div id="state">状态：清醒</div>
      </div>
      <div class="controls">
        <button id="btnStart">开始</button>
        <button id="btnPause">暂停</button>
        <button id="btnNextDay">跳到次日</button>
        <label class="speed">
          速度
          <select id="speedSelect">
            <option value="1">x1</option>
            <option value="2">x2</option>
            <option value="4">x4</option>
            <option value="8">x8</option>
          </select>
        </label>
      </div>
    </header>

    <main class="layout">
      <section class="left">
        <div class="panel">
          <h3>指标</h3>
          <div class="meters">
            <div class="meter">
              <div class="label">清醒度</div>
              <div class="bar"><div id="barAlertness" class="fill"></div></div>
              <div id="valAlertness" class="value">0</div>
            </div>
            <div class="meter">
              <div class="label">睡眠压力</div>
              <div class="bar"><div id="barSleepPressure" class="fill"></div></div>
              <div id="valSleepPressure" class="value">0</div>
            </div>
            <div class="meter">
              <div class="label">昼夜节律</div>
              <div class="bar"><div id="barCircadian" class="fill"></div></div>
              <div id="valCircadian" class="value">0</div>
            </div>
            <div class="meter">
              <div class="label">褪黑素</div>
              <div class="bar"><div id="barMelatonin" class="fill"></div></div>
              <div id="valMelatonin" class="value">0</div>
            </div>
            <div class="meter">
              <div class="label">咖啡因</div>
              <div class="bar"><div id="barCaffeine" class="fill"></div></div>
              <div id="valCaffeine" class="value">0</div>
            </div>
            <div class="meter">
              <div class="label">健康</div>
              <div class="bar"><div id="barHealth" class="fill"></div></div>
              <div id="valHealth" class="value">100</div>
            </div>
            <div class="meter">
              <div class="label">表现</div>
              <div class="bar"><div id="barPerformance" class="fill"></div></div>
              <div id="valPerformance" class="value">0</div>
            </div>
          </div>
        </div>

        <div class="panel">
          <h3>小贴士</h3>
          <ul class="tips">
            <li>保持固定的起床与入睡时间可提升昼夜对齐度。</li>
            <li>早间强光提高清醒度，夜晚蓝光抑制褪黑素。</li>
            <li>咖啡因半衰期约5小时，晚喝影响睡眠质量。</li>
            <li>短午睡可缓解睡眠压力，但太晚会推迟入睡。</li>
            <li>规律运动有益睡眠，但避免临睡前高强度。</li>
          </ul>
        </div>
      </section>

      <section class="center">
        <div class="panel">
          <h3>时间线与曲线（最近24小时）</h3>
          <canvas id="chart" width="800" height="220"></canvas>
          <div class="legend">
            <span class="lg alertness">清醒度</span>
            <span class="lg sleep">睡眠压力</span>
            <span class="lg circadian">昼夜节律</span>
          </div>
        </div>
        <div class="panel">
          <h3>日志</h3>
          <div id="log" class="log"></div>
        </div>
      </section>

      <section class="right">
        <div class="panel actions">
          <h3>行动</h3>
          <div class="action-grid">
            <button id="btnSleepToggle">上床睡觉</button>
            <button id="btnNap">小睡20分钟</button>
            <button id="btnCoffee">咖啡</button>
            <button id="btnBrightLight">强光曝露15分钟</button>
            <button id="btnScreenToggle">屏幕（蓝光）</button>
            <button id="btnExercise">运动30分钟</button>
          </div>
          <div class="toggles">
            <label>
              <input type="checkbox" id="chkDarkRoom" /> 夜间遮光
            </label>
          </div>
        </div>

        <div class="panel">
          <h3>日程</h3>
          <div class="schedule">
            <div>工作时间：<span id="workHours">09:00 - 17:00</span></div>
            <div>目标睡眠：<span id="targetSleep">23:00 - 07:00</span></div>
            <div>当前活动：<span id="currentActivity">闲暇</span></div>
          </div>
        </div>

        <div class="panel">
          <h3>目标</h3>
          <ul>
            <li>坚持 7 天。</li>
            <li>健康 ≥ 70。</li>
            <li>平均工作表现 ≥ 70。</li>
          </ul>
        </div>
      </section>
    </main>

    <footer class="bottombar">
      <div>基于两过程模型（睡眠压力与昼夜节律）的简化模拟</div>
    </footer>
  </div>

  <script src="/workspace/game.js"></script>
</body>
</html>